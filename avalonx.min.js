!function(){function a(){var a={},b={},c={},d={};return{define:function(b){if(b.hasOwnProperty("store"))throw"Avalonx: keyword store is defined";if(b.hasOwnProperty("$store")){b.store=a,delete b.$store;var e=avalon.define(b);return d[b.$id]=b,c[b.$id]=e,e}return avalon.define(b)},remove:function(a){delete c[a],delete d[a]},reset:function(a){return d.hasOwnProperty(a)?(c[a]=avalon.define(d[a]),1):0},store:function(b){var d,e;for(d in b)a[d]=b[d];for(e in c)c[e].store=a},patch:function(c,d){if("object"==typeof c){for(var e in c){if(!a.hasOwnProperty(e))return 0;b[e]=c[e]}return 1}return a.hasOwnProperty(c)?(b[c]=d,1):0},unpatch:function(a){a?delete b[a]:b={}},dispatch:function(d){var e,f;if(d){if(a.hasOwnProperty(d)){for(e in c)c[e].store[d]=b[d];return a[d]=b[d],delete b[d],1}return 0}for(e in c)for(f in b)a[f]=b[f],c[e].store[f]=b[f];return b={},1}}}window.avalonx=new a}();